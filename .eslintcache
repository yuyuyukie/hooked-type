[{"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\App.tsx":"1","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\index.tsx":"2","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\Movie.tsx":"3","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\Search.tsx":"4","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\Header.tsx":"5","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\firebase\\config.js":"6","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\Authentication.tsx":"7","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\firebase\\uiConfig.js":"8","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\Menu.tsx":"9","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\Modal.tsx":"10","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\firebase\\index.ts":"11","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\FavoriteMode.tsx":"12","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\AppContext.tsx":"13","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\AuthProvider.tsx":"14","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\SearchMode.tsx":"15","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\PageSwitcher.tsx":"16","C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\MovieHolder.tsx":"17"},{"size":1857,"mtime":1610769591924,"results":"18","hashOfConfig":"19"},{"size":536,"mtime":1610668407524,"results":"20","hashOfConfig":"19"},{"size":2799,"mtime":1610670840596,"results":"21","hashOfConfig":"19"},{"size":931,"mtime":1610668146330,"results":"22","hashOfConfig":"19"},{"size":543,"mtime":1610670466473,"results":"23","hashOfConfig":"19"},{"size":407,"mtime":1610176792898,"results":"24","hashOfConfig":"19"},{"size":1234,"mtime":1610686091763,"results":"25","hashOfConfig":"19"},{"size":328,"mtime":1610410238722,"results":"26","hashOfConfig":"27"},{"size":1998,"mtime":1610701817126,"results":"28","hashOfConfig":"19"},{"size":925,"mtime":1610722605194,"results":"29","hashOfConfig":"19"},{"size":235,"mtime":1610547750530,"results":"30","hashOfConfig":"19"},{"size":2441,"mtime":1610769910031,"results":"31","hashOfConfig":"19"},{"size":243,"mtime":1610670070120,"results":"32","hashOfConfig":"19"},{"size":1202,"mtime":1610670028721,"results":"33","hashOfConfig":"19"},{"size":2983,"mtime":1610769971748,"results":"34","hashOfConfig":"19"},{"size":553,"mtime":1610769594243,"results":"35","hashOfConfig":"19"},{"size":3131,"mtime":1610770249670,"results":"36","hashOfConfig":"19"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1o2yb5t",{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"12fufsj",{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"41"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"65"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"72","messages":"73","errorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"74"},"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\App.tsx",[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\index.tsx",[],[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\Movie.tsx",[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\Search.tsx",[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\Header.tsx",[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\firebase\\config.js",[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\Authentication.tsx",[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\firebase\\uiConfig.js",[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\Menu.tsx",[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\Modal.tsx",[],[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\firebase\\index.ts",[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\FavoriteMode.tsx",[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\AppContext.tsx",[],[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\AuthProvider.tsx",[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\SearchMode.tsx",[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\PageSwitcher.tsx",[],"C:\\Users\\zx275\\Documents\\WebApplications\\hooked-type\\src\\components\\MovieHolder.tsx",["75"],"import React, { useContext, useEffect, useReducer, useState } from \"react\";\r\nimport { firebaseApp } from \"../firebase\";\r\nimport { Mode, MovieObject } from \"./App\";\r\nimport { AuthContext } from \"./AuthProvider\";\r\nimport FavoriteMode from \"./FavoriteMode\";\r\nimport PageSwitcher from \"./PageSwitcher\";\r\nimport SearchMode from \"./SearchMode\";\r\n\r\ntype Props = {\r\n  showMode: Mode;\r\n};\r\n\r\n// enumの代替。\r\n// const DATABASE_ORDER = {\r\n//   standby: \"standby\",\r\n//   add: \"add\",\r\n//   delete: \"delete\",\r\n//   fetch: \"fetch\",\r\n// };\r\n// // eslint-disable-next-line @typescript-eslint/no-redeclare\r\n// type DATABASE_ORDER = typeof DATABASE_ORDER[keyof typeof DATABASE_ORDER];\r\n// type ACTION = { type: ACTION; target: MovieObject[] };\r\n// type MoviesState = {\r\n//   favoriteMovies: MovieObject[];\r\n//   databaseOrder: DATABASE_ORDER;\r\n//   target?: MovieObject;\r\n// };\r\n\r\n// const reducer = (state: MoviesState, action: ACTION): MoviesState => {\r\n\r\n// };\r\nconst db = firebaseApp.firestore();\r\nconst MovieHolder: React.FC<Props> = (props) => {\r\n  // ログインしてないなら説明＋誘導\r\n  const currentUser = useContext(AuthContext);\r\n  // asyncのため更新検知\r\n  const [favMovies, setFavMovies] = useState<MovieObject[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  // async の購読解除、アップデート用\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      const favMoviesRef = db\r\n        .collection(\"users\")\r\n        .doc(currentUser.uid)\r\n        .collection(\"favoriteMovies\");\r\n      setLoading(true);\r\n      favMoviesRef.get().then((snapshot) => {\r\n        console.log(snapshot.size);\r\n        snapshot.forEach((doc) => {\r\n          // 本当はisMovieObjectを使いたいが、コンパイルエラーが発生する\r\n          const movie = (doc.data() as any) as MovieObject;\r\n          setFavMovies((movies) => [...movies, movie]);\r\n        });\r\n        setLoading(false);\r\n      });\r\n    }\r\n  }, [currentUser, favMovies]);\r\n\r\n  if (!currentUser) {\r\n    return (\r\n      <div className=\"notLoggedInMessage\" style={{ fontSize: \"1.5rem\" }}>\r\n        We need you to \"Sign in\" to use this functionality.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // const [searchMovies, setSearchMovies] = useState<MovieObject[]>([]);\r\n  // SearchModeでお気に入りに入れた映画があるか判定するために橋渡しするMovieObject[]\r\n  // const initialMoviesState: MoviesState = {\r\n  //   favoriteMovies: [],\r\n  //   databaseOrder: DATABASE_ORDER.fetch,\r\n  // };\r\n  // const [moviesState, dispatch] = useReducer(reducer, initialMoviesState);\r\n  return (\r\n    <>\r\n      <PageSwitcher showIndex={props.showMode === \"search\" ? 0 : 1}>\r\n        <SearchMode\r\n          setFavMovies={setFavMovies}\r\n          favMovies={favMovies}\r\n          // dispatch={dispatch}\r\n          // moviesState={moviesState}\r\n        />\r\n        <FavoriteMode\r\n          loading={loading}\r\n          setFavMovies={setFavMovies}\r\n          favMovies={favMovies}\r\n          // dispatch={dispatch}\r\n          // moviesState={moviesState}\r\n        />\r\n      </PageSwitcher>\r\n    </>\r\n  );\r\n};\r\nexport default MovieHolder;\r\n",{"ruleId":null,"fatal":true,"severity":2,"message":"76","line":51,"column":37},"Parsing error: Unexpected token, expected \",\"\n\n  49 |         snapshot.forEach((doc) => {\n  50 |           // 本当はisMovieObjectを使いたいが、コンパイルエラーが発生する\n> 51 |           const movie = (doc.data() as any) as MovieObject;\n     |                                     ^\n  52 |           setFavMovies((movies) => [...movies, movie]);\n  53 |         });\n  54 |         setLoading(false);"]